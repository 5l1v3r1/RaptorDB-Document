using System;
using System.Collections.Generic;
using System.Text;

using RaptorDB.Mapping;

namespace mapnamespace
{

%VIEW_ROW%


    public class mapfunction : IMAPFunction
    {
		private List<object[]> Rows = new List<object[]>();

        public List<object[]> GetRows()
        {
            return Rows;
        }

        public void CallMapper(Guid docid, object data, IMapAPI api)
        {
            map(docid, (%BASE_TYPE%)data, api);
        }

        private void emit(Guid guid, %COLUMNS_PARAMS%)
        {
            object[] data = new object[ %COLUMN_COUNT% + 1];
            data[0] = guid;			
			%DATA_ASSIGN%

            Rows.Add(data);
        }

        private void map(Guid docid, %BASE_TYPE% data, IMapAPI api)
        {
%USER_CODE%
        }
    }
}
